<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>JDemetra+ documentation - SA: Pre-Treatment</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./A-sa-X11-decomposition.html" rel="next">
<link href="./A-sa-overview.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./P_Algorithms.html">Algorithms</a></li><li class="breadcrumb-item"><a href="./A-sa-pre-treatment.html">SA: Pre-Treatment</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">JDemetra+ documentation</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/annasmyk/JD_Quarto_Book" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">What is JDemetra+?</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./G-how-to-use-this-book.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to use this book</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./G-news-v3-vs-v2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">New Features in v 3.x family</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./P_Algorithms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Algorithms</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A-RegArima-Tramo-Modelling-Overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modelling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A-sa-overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Seasonal Adjustment (SA) Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A-sa-pre-treatment.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">SA: Pre-Treatment</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A-sa-X11-decomposition.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SA: X11 Decomposition</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A-sa-seats-decomposition.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SA: SEATS Decomposition</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A-rev-policies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SA: Revision policies</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A-sa-hf.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SA of high-frequency data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A-sa-x12.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SA: X12+ and MX12+</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A-sa-stl-decomposition.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SA: STL+ and MSTL+</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A-sa-bsm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SA: STS and MSTS</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A-outlier-detection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Outlier detection and external regressors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A-calendar-correction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Calendar correction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A-benchmarking.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Benchmarking and temporal disagreggation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A-trend-cycle-estimation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Trend-cycle estimation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A-revision-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Revision Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A-nowcasting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Nowcasting</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./P_Tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tools</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./T-GUI-Overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Graphical User Interface (GUI): Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./T-GUI-Data-Viz-TS-Tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">GUI: data visualization and time series tools</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./T-GUI-SA-Modelling-Features.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">GUI: SA and Modelling Features</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./T-GUI-Output.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">GUI: Generating output</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./T-plug-ins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Plug-ins (GUI extensions)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./T-Production-tools-cruncher-QR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cruncher and quality report</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./T-r-packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R packages</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./P_Methods.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Methods</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./M-spectral-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Spectral Analysis Principles and Tools</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./M-reg-arima-modelling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reg-Arima models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./M-X11-decomposition.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">X11 decomposition</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./M-SEATS-decomposition.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SEATS decomposition</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./M-tests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tests</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./M-STL-decomposition.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">STL: Local regression decomposition</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./M-Temp-Disagg-Bench.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Benchmarking and Temporal disaggregation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./M-revision-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Revision Analysis</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Output_Description.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Output description</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#in-this-chapter" id="toc-in-this-chapter" class="nav-link active" data-scroll-target="#in-this-chapter">In this chapter</a></li>
  <li><a href="#pre-treatment-principles" id="toc-pre-treatment-principles" class="nav-link" data-scroll-target="#pre-treatment-principles">Pre-treatment principles</a></li>
  <li><a href="#sa-pre-t-realloc" id="toc-sa-pre-t-realloc" class="nav-link" data-scroll-target="#sa-pre-t-realloc">Reallocation of pre-treatment effects</a></li>
  <li><a href="#a-pre-t-def-spec" id="toc-a-pre-t-def-spec" class="nav-link" data-scroll-target="#a-pre-t-def-spec">Setting Specifications</a>
  <ul class="collapse">
  <li><a href="#usr-def-spec" id="toc-usr-def-spec" class="nav-link" data-scroll-target="#usr-def-spec">User-defined specifications</a></li>
  <li><a href="#sa-pre-t-spans" id="toc-sa-pre-t-spans" class="nav-link" data-scroll-target="#sa-pre-t-spans">Spans</a></li>
  <li><a href="#sa-pre-t-mode" id="toc-sa-pre-t-mode" class="nav-link" data-scroll-target="#sa-pre-t-mode">Decomposition Scheme</a></li>
  <li><a href="#calendar-correction" id="toc-calendar-correction" class="nav-link" data-scroll-target="#calendar-correction">Calendar correction</a></li>
  <li><a href="#outliers" id="toc-outliers" class="nav-link" data-scroll-target="#outliers">Outliers</a></li>
  <li><a href="#user-defined-regressors-1" id="toc-user-defined-regressors-1" class="nav-link" data-scroll-target="#user-defined-regressors-1">User-defined regressors</a></li>
  <li><a href="#arima-model" id="toc-arima-model" class="nav-link" data-scroll-target="#arima-model">Arima Model</a></li>
  <li><a href="#reg-arima-model-results-and-diagnostics" id="toc-reg-arima-model-results-and-diagnostics" class="nav-link" data-scroll-target="#reg-arima-model-results-and-diagnostics">Reg-Arima model Results and Diagnostics</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/annasmyk/JD_Quarto_Book/edit/main/A-sa-pre-treatment.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/annasmyk/JD_Quarto_Book/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sa-pre-t" class="quarto-section-identifier">SA: Pre-Treatment</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="in-this-chapter" class="level2">
<h2 class="anchored" data-anchor-id="in-this-chapter">In this chapter</h2>
<p>The following sections cover pre-treatment with Reg-ARIMA (or Tramo) algorithms. Tramo and the Reg-Arima part of X13-ARIMA rely on very similar <a href="M-reg-arima-modelling.html">principles</a>. Thus Tramo will only be mentioned to highlight differences with the Reg-Arima part of X13-ARIMA.</p>
<p>Reg-Arima modelling part can be the first of a seasonal adjustment process or run on its <a href="A-RegArima-Tramo-Modelling-Overview.html">own</a>. Below we focus on performing reg-arima modelling as pre-treatment in a SA processing.</p>
<p>More in-depth methodological explanations of the algorithms can be found in <a href="P_Methods.html">this part</a> of the documentation.</p>
</section>
<section id="pre-treatment-principles" class="level2">
<h2 class="anchored" data-anchor-id="pre-treatment-principles">Pre-treatment principles</h2>
<p>The goal of this step is to remove deterministic effects (calendar and outliers) in order to improve the decomposition.</p>
<p><span class="math display">\[
Y_t = \sum{\alpha}_i O_{it} + \sum\beta_j C_{jt} + \sum {\gamma}_i Reg_{it} + Y_{lin,t}
\]</span></p>
<ul>
<li><p><span class="math inline">\(O_{it}\)</span> are the <span class="math inline">\(i\)</span> final outliers (AO, LS, TC)</p></li>
<li><p><span class="math inline">\(C_{it}\)</span> are the calendar regressors (automatic or user-defined), details <a href="A-calendar-correction.html">here</a></p></li>
<li><p><span class="math inline">\(Reg_{it}\)</span> are all the other user-defined regressors details <a href="A-outlier-detection.html">here</a></p></li>
<li><p><span class="math inline">\(Y_{lin,t} \sim ARIMA(p,d,q)(P,D,Q)\)</span></p></li>
</ul>
</section>
<section id="sa-pre-t-realloc" class="level2">
<h2 class="anchored" data-anchor-id="sa-pre-t-realloc">Reallocation of pre-treatment effects</h2>
<p>The linearised series (<span class="math inline">\(Y_{lin,t}\)</span>) is be decomposed into unobservable components in the decomposition phase</p>
<p><span class="math display">\[Y_{lin} =S_{lin} +T_{lin}+I_{lin}\]</span></p>
<p>Pre-treatment effects are then reallocated to build the final components</p>
<p><span class="math display">\[S=S_{lin}+cal+out_s+reg_s\]</span></p>
<p><span class="math display">\[T=T_{lin}+out_t+reg_{t}\]</span></p>
<p><span class="math display">\[I=I_{lin}+out_i+reg_{i}\]</span></p>
<p>Where</p>
<ul>
<li><p><span class="math inline">\(cal\)</span> is the total calendar effect</p></li>
<li><p><span class="math inline">\(out_j\)</span> is the total effect of outliers on component <span class="math inline">\(j\)</span></p></li>
<li><p><span class="math inline">\(reg_j\)</span> is the total effect of user-defined regressors on component <span class="math inline">\(j\)</span></p></li>
</ul>
</section>
<section id="a-pre-t-def-spec" class="level2">
<h2 class="anchored" data-anchor-id="a-pre-t-def-spec">Setting Specifications</h2>
<p>Default specifications are set for the whole SA procedure, pre-treatment and decomposition. They are slightly different for X13-ARIMA and TRAMO-SEATS and can be modified with user-defined parameters.</p>
<section id="a-pre-t-def-spec-x13" class="level4">
<h4 class="anchored" data-anchor-id="a-pre-t-def-spec-x13">Starting point for X13-ARIMA</h4>
<table class="table">
<colgroup>
<col style="width: 18%">
<col style="width: 22%">
<col style="width: 21%">
<col style="width: 19%">
<col style="width: 17%">
</colgroup>
<thead>
<tr class="header">
<th>Spec identifier</th>
<th>Log/level detection</th>
<th>Outliers detection</th>
<th>Calendar effects</th>
<th>ARIMA</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>RSA0</td>
<td><em>NA</em></td>
<td><em>NA</em></td>
<td><em>NA</em></td>
<td>Airline(+mean)</td>
</tr>
<tr class="even">
<td>RSA1</td>
<td>automatic</td>
<td>AO/LS/TC</td>
<td><em>NA</em></td>
<td>Airline(+mean)</td>
</tr>
<tr class="odd">
<td>RSA2c</td>
<td>automatic</td>
<td>AO/LS/TC</td>
<td>2 TD vars+Easter</td>
<td>Airline(+mean)</td>
</tr>
<tr class="even">
<td>RSA3</td>
<td>automatic</td>
<td>AO/LS/TC</td>
<td><em>NA</em></td>
<td>automatic</td>
</tr>
<tr class="odd">
<td>RSA4c</td>
<td>automatic</td>
<td>AO/LS/TC</td>
<td>2 TD vars+Easter</td>
<td>automatic</td>
</tr>
<tr class="even">
<td>RSA5</td>
<td>automatic</td>
<td>AO/LS/TC</td>
<td>7 TD vars+Easter</td>
<td>automatic</td>
</tr>
<tr class="odd">
<td>X-11</td>
<td><em>NA</em></td>
<td><em>NA</em></td>
<td><em>NA</em></td>
<td><em>NA</em></td>
</tr>
</tbody>
</table>
<p>explanations:</p>
<ul>
<li><p><em>NA:</em> non applied, for example in RSA3 there is no calendar effect correction</p></li>
<li><p>automatic: test is performed</p></li>
</ul>
<p>outliers detection: AO/LS/TC type of outliers automatically detected under a critical T-Stat value (default value=4)</p>
<p>calendar:</p>
<ul>
<li><p>2 regressors: weekdays vs week-ends + LY</p></li>
<li><p>7 regressors: each week day vs Sundays + LY</p></li>
<li><p>always tested</p></li>
<li><p>easter tested (default length = 6 days in Tramo, 8 days in X13-ARIMA)</p></li>
</ul>
</section>
<section id="sa-pre-t-ts-specs" class="level4">
<h4 class="anchored" data-anchor-id="sa-pre-t-ts-specs">Starting point for Tramo-Seats</h4>
<table class="table">
<colgroup>
<col style="width: 18%">
<col style="width: 22%">
<col style="width: 21%">
<col style="width: 19%">
<col style="width: 17%">
</colgroup>
<thead>
<tr class="header">
<th>Spec identifier</th>
<th>Log/level detection</th>
<th>Outliers detection</th>
<th>Calendar effects</th>
<th>ARIMA</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>RSA0</td>
<td><em>NA</em></td>
<td><em>NA</em></td>
<td><em>NA</em></td>
<td>Airline(+mean)</td>
</tr>
<tr class="even">
<td>RSA1</td>
<td>automatic</td>
<td>AO/LS/TC</td>
<td><em>NA</em></td>
<td>Airline(+mean)</td>
</tr>
<tr class="odd">
<td>RSA2</td>
<td>automatic</td>
<td>AO/LS/TC</td>
<td>2 TD vars+Easter</td>
<td>Airline(+mean)</td>
</tr>
<tr class="even">
<td>RSA3</td>
<td>automatic</td>
<td>AO/LS/TC</td>
<td><em>NA</em></td>
<td>automatic</td>
</tr>
<tr class="odd">
<td>RSA5</td>
<td>automatic</td>
<td>AO/LS/TC</td>
<td>6 TD vars+Easter</td>
<td>automatic</td>
</tr>
<tr class="even">
<td>RSAfull</td>
<td>automatic</td>
<td>AO/LS/TC</td>
<td>automatic</td>
<td>automatic</td>
</tr>
</tbody>
</table>
</section>
<section id="usr-def-spec" class="level3">
<h3 class="anchored" data-anchor-id="usr-def-spec">User-defined specifications</h3>
<p>Principle oser setting parameters: can be done from one of the default specifications or any specification in a “Save as” mode very similar in GUI and R, as detailed below.</p>
<p>The user may add new seasonal adjustment specifications to the <em>Workspace</em> window. To do it, go to the <em>Seasonal adjustment</em> section, right click on the <em>tramoseats</em> or <em>x13</em> item in the <em>specifications</em> node and select <em>New</em> from the local menu.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/RM_C_pic20.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Creating a new specification in the <em>Seasonal adjustment</em> section</strong></figcaption>
</figure>
</div>
<p>Next, double click on the newly created specification, change the settings accordingly and confirm with the <strong>OK</strong> button.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/RM_C_pic21.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Changing settings of seasonal adjustment specification</strong></figcaption>
</figure>
</div>
</section>
<section id="sa-pre-t-spans" class="level3">
<h3 class="anchored" data-anchor-id="sa-pre-t-spans">Spans</h3>
<section id="estimation-span" class="level4">
<h4 class="anchored" data-anchor-id="estimation-span">Estimation span</h4>
<p>Specifies the span (data interval) of the time series to be used in the seasonal adjustment process. The user can restrict the span</p>
<p>Common settings</p>
<table class="table">
<colgroup>
<col style="width: 9%">
<col style="width: 87%">
<col style="width: 2%">
</colgroup>
<thead>
<tr class="header">
<th>Option</th>
<th>Description (expected format)</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>All</td>
<td>default</td>
<td></td>
</tr>
<tr class="even">
<td>From</td>
<td>first observation included (yyyy-mm-dd)</td>
<td></td>
</tr>
<tr class="odd">
<td>To</td>
<td>last observation included (yyyy-mm-dd)</td>
<td></td>
</tr>
<tr class="even">
<td>Between</td>
<td>interval [from ; to] included (yyyy-mm-dd to yyyy-mm-dd)</td>
<td></td>
</tr>
<tr class="odd">
<td>First</td>
<td>number of obs from the beginning of the series included (dynamic) (integer)</td>
<td></td>
</tr>
<tr class="even">
<td>Last</td>
<td>number of obs from the end of the series (dynamic)(integer)</td>
<td></td>
</tr>
<tr class="odd">
<td>Excluding</td>
<td>excluding N first obs and P last obs from the computation,dynamic) (integer)</td>
<td></td>
</tr>
<tr class="even">
<td>Preliminary check</td>
<td>check to exclude highly problematic series e.g.&nbsp;the series with a number of identical observations and/or missing values above pre-specified threshold values. (True/False)</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Setting series span in GUI</strong></p>
<p>Use the specification window for a given series and expand the nodes.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_Spans.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Setting series span in R</strong></figcaption>
</figure>
</div>
<p>x13 in version 2</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"RJDemetra"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># estimation interval: option with static dates</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>user_spec_1 <span class="ot">&lt;-</span> <span class="fu">x13_spec</span>(</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">spec =</span> <span class="fu">c</span>(</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"RSA5c"</span>, <span class="st">"RSA0"</span>, <span class="st">"RSA1"</span>, <span class="st">"RSA2c"</span>,</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"RSA3"</span>, <span class="st">"RSA4c"</span>, <span class="st">"X11"</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">preliminary.check =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimate.from =</span> <span class="st">"2012-06-01"</span>,</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimate.to =</span> <span class="st">"2019-12-01"</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co"># estimation interval: option with dynamic numbers of observations</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co"># spec can be applied on different series and therefore exclude different dates</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>user_spec_2 <span class="ot">&lt;-</span> <span class="fu">x13_spec</span>(</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">spec =</span> <span class="fu">c</span>(<span class="st">"RSA5c"</span>, <span class="st">"RSA0"</span>, <span class="st">"RSA1"</span>, <span class="st">"RSA2c"</span>, <span class="st">"RSA3"</span>, <span class="st">"RSA4c"</span>, <span class="st">"X11"</span>),</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimate.first =</span> <span class="dv">12</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="co"># eestimation on the last 120 obs</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>user_spec_3 <span class="ot">&lt;-</span> <span class="fu">x13_spec</span>(</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">spec =</span> <span class="fu">c</span>(<span class="st">"RSA5c"</span>, <span class="st">"RSA0"</span>, <span class="st">"RSA1"</span>, <span class="st">"RSA2c"</span>, <span class="st">"RSA3"</span>, <span class="st">"RSA4c"</span>, <span class="st">"X11"</span>),</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimate.last =</span> <span class="dv">120</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="co"># excluding first 24 and last 36 observations</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>user_spec_4 <span class="ot">&lt;-</span> <span class="fu">x13_spec</span>(</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">spec =</span> <span class="fu">c</span>(<span class="st">"RSA5c"</span>, <span class="st">"RSA0"</span>, <span class="st">"RSA1"</span>, <span class="st">"RSA2c"</span>, <span class="st">"RSA3"</span>, <span class="st">"RSA4c"</span>, <span class="st">"X11"</span>),</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimate.exclFirst =</span> <span class="dv">24</span>,</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimate.exclLast =</span> <span class="dv">36</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Retrieve settings</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For comprehensive details about x13_spec function see RJDemetra R help pages.</p>
<p>TRAMO-SEATS in version 2</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># excluding first 24 and last 36 observations</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>user_spec_1 <span class="ot">&lt;-</span> <span class="fu">tramoseats_spec</span>(</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">spec =</span> <span class="fu">c</span>(<span class="st">"RSAfull"</span>, <span class="st">"RSA0"</span>, <span class="st">"RSA1"</span>, <span class="st">"RSA2"</span>, <span class="st">"RSA3"</span>, <span class="st">"RSA4"</span>, <span class="st">"RSA5"</span>),</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimate.exclFirst =</span> <span class="dv">24</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimate.exclLast =</span> <span class="dv">36</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For comprehensive details about tramoseats_spec function see RJDemetra R help pages.</p>
</section>
<section id="setting-model-span" class="level4">
<h4 class="anchored" data-anchor-id="setting-model-span">Setting model span</h4>
<p>The user can also specify the span (data interval) of the time series to be used for the estimation of the Reg-ARIMA model coefficients. It allows to impede a chosen part of the data from influencing the regression estimates. Setting works the same way as setting series (estimation) span described above.</p>
<p>Additional (vs series span setting) parameters are described below:</p>
<table class="table">
<colgroup>
<col style="width: 18%">
<col style="width: 81%">
</colgroup>
<tbody>
<tr class="odd">
<td>Tolerance</td>
<td><p>Convergence tolerance for the non-linear estimation.</p>
<p>The absolute changes in the log-likelihood are compared to Tolerance to check the convergence of the estimation iterations.</p>
<p>The default setting is 0.0000001.</p></td>
</tr>
<tr class="even">
<td>Tramo specific parameters</td>
<td></td>
</tr>
<tr class="odd">
<td>Exact ML</td>
<td><p>When this option is marked, an exact maximum likelihood estimation is performed.</p>
<p>Alternatively, the Unconditional Least Squares method is used.</p>
<p>However, in the current version of JDemetra+ it is not recommended to change this parameter’s value</p></td>
</tr>
<tr class="even">
<td>Unit Root Limit</td>
<td><p>Limit for the autoregressive roots. If the inverse of a real root of the autoregressive polynomial of the</p>
<p>ARIMA model is higher than this limit, the root is set equal to 1. The default parameter value is 0.96.</p></td>
</tr>
</tbody>
</table>
<p><strong>Setting model span in GUI</strong>:</p>
<p>Use the specification window</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_model_spans.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Setting in R</strong></figcaption>
</figure>
</div>
<p>Tramo example in version 2</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># excluding first 24 and last 36 observations</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>user_spec_1 <span class="ot">&lt;-</span> <span class="fu">tramoseats_spec</span>(</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">spec =</span> <span class="fu">c</span>(<span class="st">"RSAfull"</span>, <span class="st">"RSA0"</span>, <span class="st">"RSA1"</span>, <span class="st">"RSA2"</span>, <span class="st">"RSA3"</span>, <span class="st">"RSA4"</span>, <span class="st">"RSA5"</span>),</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimate.tol =</span> <span class="fl">0.0000001</span>,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimate.eml =</span> <span class="cn">FALSE</span>,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimate.urfinal =</span> <span class="fl">0.98</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="sa-pre-t-mode" class="level3">
<h3 class="anchored" data-anchor-id="sa-pre-t-mode">Decomposition Scheme</h3>
<section id="parameters" class="level4">
<h4 class="anchored" data-anchor-id="parameters">Parameters</h4>
<p>Transformation test: a test is performed to choose between an additive decomposition (no transformation) (link to reg A chap to detail this)</p>
<p>Settings</p>
<p>Function</p>
<p>transform {function=}</p>
<p>Transformation of data. 2 The user can choose between:</p>
<p>None – no transformation of the data;</p>
<p>Log – takes logs of the data;</p>
<p>Auto – the program tests for the log-level specification. This option is recommended for automatic modelling of many series.</p>
<p>The default setting is Auto.</p>
<p>Reg-Arima specific settings</p>
<p>AIC difference</p>
<p>transform {aicdiff=}</p>
<p>Defines the difference in AICC needed to accept no transformation over a log transformation when the automatic transformation</p>
<p>selection option is invoked. The option is disabled when Function is not set to Auto. The default AIC difference value is -2.</p>
<p>Adjust</p>
<p>transform {adjust=}</p>
<p>Options for proportional adjustment for the leap year effect. The option is available when Function is set to Log. Adjust can be set to:</p>
<p>LeapYear – performs a leap year adjustment of monthly or quarterly data;</p>
<p>LengthofPeriod – performs a length-of-month adjustment on monthly data or length-of-quarter adjustment on quarterly data;</p>
<p>None – does not include a correction for the length of the period.</p>
<p>The default setting is None</p>
<p>Tramo specific settings</p>
<p><strong>Fct</strong><br>
<em>Transformation; fct</em></p>
<p>Controls the bias in the log/level pre-test (the function is active when <strong>Function</strong> is set to <em>Auto</em>); <strong>Fct</strong> &gt; 1 favours levels, <strong>Fct</strong> &lt; 1 favors logs. The default setting is 0.95.</p>
<p><strong>Set in GUI</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_transfo.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Model span setting</figcaption>
</figure>
</div>
<p><strong>Set and in R</strong></p>
<p>X13</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># excluding first 24 and last 36 observations</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>user_spec <span class="ot">&lt;-</span> <span class="fu">x13_spec</span>(</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">spec =</span> <span class="fu">c</span>(<span class="st">"RSA5c"</span>, <span class="st">"RSA0"</span>, <span class="st">"RSA1"</span>, <span class="st">"RSA2c"</span>, <span class="st">"RSA3"</span>, <span class="st">"RSA4c"</span>, <span class="st">"X11"</span>),</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">transform.function =</span> <span class="st">"Log"</span>, <span class="co"># choose from: c(NA, "Auto", "None", "Log"),</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">transform.adjust =</span> <span class="st">"LeapYear"</span>, <span class="co"># c(NA, "None", "LeapYear", "LengthOfPeriod"),</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">transform.aicdiff =</span> <span class="sc">-</span><span class="dv">3</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Retrieve settings: to complete*</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>TRAMO-SEATS settings</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># transfo</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>user_spec_1 <span class="ot">&lt;-</span> <span class="fu">tramoseats_spec</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">spec =</span> <span class="fu">c</span>(<span class="st">"RSAfull"</span>, <span class="st">"RSA0"</span>, <span class="st">"RSA1"</span>, <span class="st">"RSA2"</span>, <span class="st">"RSA3"</span>, <span class="st">"RSA4"</span>, <span class="st">"RSA5"</span>),</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">transform.function =</span> <span class="st">"Auto"</span>, <span class="co"># c(NA, "Auto", "None", "Log"),</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">transform.fct =</span> <span class="fl">0.5</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Retrieve settings: to complete</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="calendar-correction" class="level3">
<h3 class="anchored" data-anchor-id="calendar-correction">Calendar correction</h3>
<p>Some calendar correction options included in the starting specifications for X13-ARIMA or TRAMO-SEATS, they can be fine-tuned by modifying specifications. The following section lists all the available options, illustrates how to set them in GUI or R and shows have to retrieve used parameters, regressors as well as results.</p>
<p>JDemetra+ offers two default options for calendar correction working days regressors and trading days regressors, with Leap-year effect if needed. Those options don’t take into account national calendars (link) and their specific holidays. There are two ways to change this:</p>
<ul>
<li><p>user-defined regressors (link)</p></li>
<li><p>customized calendars (link)</p></li>
</ul>
<p>Overview: what you can do</p>
<p>Need 1: correct for working days, trading days (+ easter) not taking national calendars</p>
<p>Need 2: taking national calendar into account Solutions</p>
<ul>
<li>add a work of means of allocating regressors to the calendar component</li>
</ul>
<section id="available-options" class="level4">
<h4 class="anchored" data-anchor-id="available-options">Available Options</h4>
<section id="trading-days" class="level5">
<h5 class="anchored" data-anchor-id="trading-days">Trading Days</h5>
<p>“Trading Days” has two meanings: general calendar correction process (here without easter effect) and one of the options of this correction (see below)</p>
<pre><code>-    "None": no correction for trading days and working days effects

-    "Default": JDemetra + built regressors (xorking days or trading days)

-    "Holidays": same as above but taking into accoutn a national calendar,                  available on ly in GUI, R interface requires direct use of pre-built                   regressors 

-     "UserDefined": user-defined trading days regressors (see below)

-    (if NONE) indicating the day of the month when inventories and other stock are reported (to denote the last day of the month, set the variable to 31). </code></pre>
</section>
<section id="leap-year-effect" class="level5">
<h5 class="anchored" data-anchor-id="leap-year-effect">Leap Year effect</h5>
<p><strong>Autoadjust</strong></p>
<p>If enabled, the program corrects automatically for the leap year effect.. When is the option available Modifications of this variable are taken into account only when transform.function is set to “Auto”.</p>
<p><strong>Leapyear</strong></p>
<p>to specify whether or not to include the leap-year effect in the model: - “LeapYear”: leap year effect; - “LengthOfPeriod”: length of period, - “None” = no effect included.</p>
<p>The leap-year effect can be pre-specified in the model only if the input series hasn’t been pre-adjusted (transform.adjust set to “None”) and if the automatic correction for the leap-year effect isn’t selected (tradingdays.autoadjust set to FALSE).</p>
</section>
</section>
<section id="test" class="level4">
<h4 class="anchored" data-anchor-id="test">Test</h4>
<p><strong>Test</strong>: defines the pre-tests for the significance of the trading day regression variables based on the AICC statistics: “Add” = the trading day variables are not included in the initial regression model but can be added to the Reg-ARIMA model after the test; “Remove” = the trading day variables belong to the initial regression model but can be removed from the RegARIMA model after the test; “None” = the trading day variables are not pre-tested and are included in the model.</p>
<section id="easter" class="level5">
<h5 class="anchored" data-anchor-id="easter">Easter</h5>
<p>Easter.enabled a logical. If TRUE, the program considers the Easter effect in the model.</p>
<p>easter.Julian a logical. If TRUE, the program uses the Julian Easter (expressed in Gregorian calendar).</p>
<p>easter.duration a numeric indicating the duration of the Easter effect (length in days, between 1 and 20).</p>
<p>easter.test defines the pre-tests for the significance of the Easter effect based on the t-statistic (the Easter effect is considered as significant if the t-statistic is greater than 1.96): “Add” = the Easter effect variable is not included in the initial regression model but can be added to the Reg-ARIMA model after the test; “Remove” = the Easter effect variable belongs to the initial regression model but can be removed from the RegARIMA model after the test; “None” = the Easter effect variable is not pre-tested and is included in the model.</p>
<p>A user-defined regressor can also be used, see chapter on <a href="./A-calendar-correction.html">calendar correction</a></p>
<p>(to be added: additional options in Tramo)</p>
</section>
</section>
<section id="setting-calendar-correction-in-gui" class="level4">
<h4 class="anchored" data-anchor-id="setting-calendar-correction-in-gui">Setting Calendar correction in GUI</h4>
<section id="using-default-options-without-national-calendars" class="level5">
<h5 class="anchored" data-anchor-id="using-default-options-without-national-calendars">Using default options (without national calendars)</h5>
<p><strong>In GUI</strong> Use the specification window</p>
<p>Calendar effects</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_calendar_options.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>STEP 1: Selection from JDemetra+ Default…or User_defined</strong></figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_calendar_default_options.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>STEP2: Calendar effects minus Easter are labeled <em>trading days</em> </strong></figcaption>
</figure>
</div>
</section>
<section id="holidays-option" class="level5">
<h5 class="anchored" data-anchor-id="holidays-option">Holidays option</h5>
<p>using a customized calendar just show how to fetch it building process in calendar chapter</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_calendar_custom.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>The list of calendars displayed under <em>Holidays</em> option corresponds to the calendars defined in the <em>Workspace</em> window</strong></figcaption>
</figure>
</div>
<p>Missing: stock td option, length-of-period</p>
<p>User-defined regressors: adding see below</p>
<p>Link to Import data Once data imported: here explain how to link variables</p>
</section>
<section id="easter-1" class="level5">
<h5 class="anchored" data-anchor-id="easter-1">Easter</h5>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_easter_options.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>easter Options</strong></figcaption>
</figure>
</div>
</section>
</section>
<section id="setting-calendar-correction-in-r" class="level4">
<h4 class="anchored" data-anchor-id="setting-calendar-correction-in-r">Setting Calendar correction in R</h4>
<p>In version 2</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameter choice NA=...</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>tradingdays.option <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">NA_character_</span>, <span class="st">"TradingDays"</span>, <span class="st">"WorkingDays"</span>, <span class="st">"UserDefined"</span>, <span class="st">"None"</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>tradingdays.autoadjust <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>tradingdays.leapyear <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">NA_character_</span>, <span class="st">"LeapYear"</span>, <span class="st">"LengthOfPeriod"</span>, <span class="st">"None"</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>tradingdays.stocktd <span class="ot">&lt;-</span> <span class="cn">NA_integer_</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>tradingdays.test <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">NA_character_</span>, <span class="st">"Remove"</span>, <span class="st">"Add"</span>, <span class="st">"None"</span>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>easter.enabled <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>easter.julian <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>easter.duration <span class="ot">&lt;-</span> <span class="cn">NA_integer_</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>easter.test <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">NA_character_</span>, <span class="st">"Add"</span>, <span class="st">"Remove"</span>, <span class="st">"None"</span>)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co"># example</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In version 3 (Under construction)</p>
</section>
<section id="user-defined-regressors" class="level4">
<h4 class="anchored" data-anchor-id="user-defined-regressors">User defined regressors</h4>
<p>If <strong>User Defined</strong> options is used for trading days, regressors have to be provided by the user.</p>
<p>Building Regressors The underlying methodology and implementation in JDemetra+ to build these regression variables are provided <a href="./A-calendar-correction.html">here</a></p>
<section id="adding-regressors-in-gui" class="level5">
<h5 class="anchored" data-anchor-id="adding-regressors-in-gui">Adding Regressors in GUI</h5>
<p>Step 1: import data set containing the regressors, general procedure explained here</p>
<p>Step 2: Link the regressors to the workspace, procedure detailed here</p>
<p>Step 3: Modify specifications Modifications are done the same way in a global specification (whole SAP) or series by series.</p>
<ul>
<li>select trading days <strong>User-defined option</strong> and select variables</li>
</ul>
<p>In the specification window, click right from “userVariables” on “Unused” to open the variable selection window</p>
<p><img src="All_images/SA_REGA_calendar_user_defined_open_variables_window.png" class="img-fluid"></p>
<p>Move right the chosen regressors</p>
<p><img src="All_images/SA_REGA_calendar_user_def_variables.png" class="img-fluid"></p>
<ul>
<li>set TEST option (expl)</li>
</ul>
<p><img src="All_images/SA_REGA_Calendar_user_def_test.png" class="img-fluid"></p>
</section>
<section id="adding-regressors-in-r" class="level5">
<h5 class="anchored" data-anchor-id="adding-regressors-in-r">Adding Regressors in R</h5>
<p>“UserDefined” = user-defined trading days regressors (regressors must be defined by the usrdef.var argument with usrdef.varType set to “Calendar” and usrdef.varEnabled = TRUE).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># example</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>spec_4 <span class="ot">&lt;-</span> <span class="fu">x13_spec</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">spec =</span> spec_1,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">tradingdays.option =</span> <span class="st">"UserDefined"</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">tradingdays.test =</span> <span class="st">"None"</span>,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">usrdef.varEnabled =</span> <span class="cn">TRUE</span>,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">usrdef.varType =</span> <span class="st">"Calendar"</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">usrdef.var =</span> reg3</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>) <span class="co"># set of regressors in TS format</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="retrieving-results" class="level4">
<h4 class="anchored" data-anchor-id="retrieving-results">Retrieving Results</h4>
<p>The following section details how to retrieve results (parameters, regressors, regression coefficients and tests) when using GUI or R interface.</p>
<section id="parameters-1" class="level5">
<h5 class="anchored" data-anchor-id="parameters-1">Parameters</h5>
<p>Parameters are regressors used in fine. If non test options, parameters are known If test options are selected by the algorithm.</p>
<p><strong>In GUI</strong></p>
<p>Automatically chosen or user-defined calendar options (as well as other pre-adjustment options) are displayed at the top of the MAIN Results NODE displayed by clicking on a given series name in the SAProcessing panel.</p>
<p><img src="All_images/SA_REGA_retrieve_cal_options_MAIN.png" class="img-fluid"></p>
<p><strong>In R</strong></p>
<p>(to be added)</p>
<p>version 2: RJDemetra</p>
<p>version 3: rjd3x13 or rjd3tramoseats</p>
</section>
<section id="regressors" class="level5">
<h5 class="anchored" data-anchor-id="regressors">Regressors</h5>
<p><strong>In GUI</strong> All regressors in the pre-adjustment phase (calendar, outliers, external) are displayed in the pre-processing-regressors node.</p>
<p><img src="All_images/SA_REGA_calendar_retrieving_regressors.png" class="img-fluid"></p>
<p><strong>In R</strong></p>
<p>(to be added)</p>
<p>Version 2</p>
<p>version 3</p>
</section>
<section id="regression-results" class="level5">
<h5 class="anchored" data-anchor-id="regression-results">Regression results</h5>
<p>Regressions results</p>
<p><strong>In GUI</strong></p>
<p>The results of the whole Reg-Arima regression (link to last section) including calendar effects (below) are displayed in the pre-processing panel.</p>
<p><img src="All_images/SA_REGA_calendar_retrieving_regressions_results.png" class="img-fluid"></p>
<p><strong>In R</strong></p>
</section>
<section id="test-for-residual-trading-days-effects" class="level5">
<h5 class="anchored" data-anchor-id="test-for-residual-trading-days-effects">Test for residual trading-days effects</h5>
<p>Residual calendar effects are tested with A F-Test 7 regressors and no national calendar, on sa final series and on irregular component (link to calendar chapter for test details)</p>
<p><strong>In GUI</strong></p>
<p>F-Test results are displayed at the bottom of <strong>Main Results</strong> NODE in the SAProcessing panel</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_Calendar_EJOR_Test.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>F-Test results in GUI</strong></figcaption>
</figure>
</div>
<p><strong>In R</strong></p>
</section>
</section>
<section id="customizing-calendars" class="level4">
<h4 class="anchored" data-anchor-id="customizing-calendars">Customizing Calendars</h4>
<p>The following describes how to take a national calendar into account.</p>
<p>Solution 1: if working with GUI build a new calendar in GUI (<a href="./A-calendar-correction.html##Generating Regressors for calendar correction">here</a></p>
<p>(to be added: GUI: how to use it or customize HTML file structure explanation)</p>
<p>set this option in GUI</p>
<p>(to be added: image: spec window calendar / holidays / choice of calendars)</p>
<p>set this option in R (to be added) version 2:</p>
<p>version 3:</p>
<p>solution 2: import external regressors, which can be built with rjd3toolkit (link) which can then be used in via are or imported via GUI</p>
<p>set this option in GUI how to import variables into JD+ / set utility (in interface chapter) classical user defined</p>
<p>set this option in R version 2:</p>
<p>version 3</p>
<p>Once the calendar regressors are set, the Reg-ARIMA (tramo) model will be estimated globally with all the other regression variables and taking into account Arima model specificities as well. That is why diagnostics are all jointly displayed at the end of the process. (link)</p>
<p>(to be added: worked example: french calendar in R)</p>
</section>
</section>
<section id="outliers" class="level3">
<h3 class="anchored" data-anchor-id="outliers">Outliers</h3>
<p>The sections below focus on</p>
<ul>
<li><p>outlier detection parameters (type and critical value)</p></li>
<li><p>pre-specifying outliers in a seasonal adjustement (reg-arima modelling) process</p></li>
</ul>
<p>Additional information can be found in <a href="./A-outlier-detection.html">this chapter</a>.</p>
<section id="options-for-automatic-detection" class="level4">
<h4 class="anchored" data-anchor-id="options-for-automatic-detection">Options for automatic detection</h4>
<ul>
<li><p><strong>Is enabled</strong><br>
<em>outliers; iatip</em></p>
<p>Enables/disables the automatic detection of outliers in the span determined by the <strong>Detection span</strong> option. By default, the checkbox is marked, which implies that the automatic identification of outliers is enabled.</p></li>
<li><p><strong>Use default critical value</strong><br>
<em>outliers; va</em></p>
<p>The critical value is automatically determined by the number of observations in the interval specified by the <strong>Detection span</strong> option. When <strong>Use default critical value</strong> is disabled, the procedure uses the critical value inputted in the <strong>Critical value</strong> item (see below). Otherwise, the default value is used (the first case corresponds to “<em>critical</em> = <em>xxx</em>”; the second corresponds to a specification without the critical argument). It should be noted that it is not possible to define a separate critical value for each outlier type. By default, the checkbox is marked, which implies that the automatic determination of the critical value is enabled.</p></li>
<li><p><strong>Critical value</strong><br>
<em>outliers; va</em></p>
<p>The critical value used in the outlier detection procedure. The option is active once <strong>Use default critical value</strong> is disabled. By default, it is set to 3.5.</p></li>
<li><p><strong>Detection span</strong> $$ <strong>type</strong><br>
<em>outliers; int1, int2*</em></p>
<p>A span of the time series to be searched for outliers. The possible values of the parameter are:</p>
<ul>
<li><em>All</em> – full time series span is considered in the modelling;</li>
<li><em>From</em> – date of the first time series observation included in the pre-processing model;</li>
<li><em>To</em> – date of the last time series observation included in the pre-processing model;</li>
<li><em>Between</em> – date of the first and the last time series observations included in the pre-processing model;</li>
<li><em>Last</em> – number of observations from the end of the time series included in the pre-processing model;</li>
<li><em>First</em> – number of observations from the beginning of the time series included in the pre-processing model;</li>
<li><em>Excluding</em> – number of observations excluded from the beginning (specified in the <em>first</em> field) and/or end of the time series (specified in the <em>last</em> field) of the pre-processing model.</li>
</ul>
<p>With the options <em>Last</em>, <em>First</em>, <em>Excluding</em> the span can be computed dynamically on the series. The default setting is <em>All</em>.</p></li>
<li><p><strong>Additive</strong><br>
<em>outliers; aio*</em></p>
<p>Automatic identification of additive outliers. By default, this option is enabled.<br>
</p></li>
<li><p><strong>Level shift</strong><br>
<em>outliers; aio*</em></p>
<p>Automatic identification of level shifts. By default, this option is enabled.</p></li>
<li><p><strong>Transitory change</strong><br>
<em>outliers; aio*</em></p>
<p>Automatic identification of transitory changes. By default, this option is enabled.</p></li>
<li><p><strong>Seasonal outlier</strong><br>
<em>outliers; aio*</em></p>
<p>Automatic identification of seasonal outliers. By default, this option is disabled. Tramo specific</p></li>
<li><p><strong>EML estimation</strong><br>
<em>outliers; imvx</em></p>
<p>The estimation method used in the automatic model identification procedure. By default, the fast method of Hannan-Rissanen is used for parameter estimation in the intermediate steps of the automatic detection and correction of outliers. When the checkbox is marked the exact maximum likelihood estimation method is used.</p></li>
<li><p><strong>TC rate</strong><br>
<em>outliers; deltatc</em></p>
<p>The rate of decay for the transitory change outlier. It takes values between 0 and 1. The default value is 0.7.</p></li>
</ul>
</section>
<section id="options-for-pre-specified-outliers" class="level4">
<h4 class="anchored" data-anchor-id="options-for-pre-specified-outliers">Options for pre-specified outliers</h4>
<p>User-defined outliers are used when prior knowledge suggests that certain effects exist at known time points[^14]. Four pre-defined outlier types, which are simple forms of intervention variables, are implemented: * Additive Outlier (AO); * Level shift (LS); * Temporary change[^15] (TC); * Seasonal outliers (SO).</p>
</section>
<section id="setting-in-gui" class="level4">
<h4 class="anchored" data-anchor-id="setting-in-gui">Setting in GUI</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_Outliers_Automatic_detection.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Automatic detection of outliers in GUI</strong></figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_Outliers_automatic_detection_span.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Outliers types in GUI</strong></figcaption>
</figure>
</div>
<p>Pre-specified :</p>
<ul>
<li>Click on <strong>…</strong></li>
<li>Click on <strong>+</strong></li>
<li>Fill the outlier’s information</li>
<li>Click on <strong>Ok</strong></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_Outliers_set_pre_specified.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Pre-specified outliers in GUI</strong></figcaption>
</figure>
</div>
<p>To change the view to set the outliers, got to Tools –&gt; Options</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_option_v3.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Options in GUI</figcaption>
</figure>
</div>
<p>Then to <strong>Demetra</strong> –&gt; <strong>Pre-specified Outliers</strong> –&gt; <strong>Calendar-like Grid</strong> –&gt; <strong>Ok</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_option_calendar_view_v3.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Change view to calendar</strong></figcaption>
</figure>
</div>
<p>Then you have the calendar view (when selecting the pre-specified outliers) :</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_Outliers_set_pre_specified_grid.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">**Calendar view in GUI</figcaption>
</figure>
</div>
</section>
<section id="setting-in-r" class="level4">
<h4 class="anchored" data-anchor-id="setting-in-r">Setting in R</h4>
<p>(to be added)</p>
</section>
<section id="retrieving-results-1" class="level4">
<h4 class="anchored" data-anchor-id="retrieving-results-1">Retrieving results</h4>
<section id="parameters-2" class="level5">
<h5 class="anchored" data-anchor-id="parameters-2">Parameters</h5>
<p><strong>In GUI</strong></p>
<p>In main results NODE (same info at top of pre-processing NODE)</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_Outliers_Retrieve_params1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Main results in GUI</strong></figcaption>
</figure>
</div>
</section>
<section id="regressors-1" class="level5">
<h5 class="anchored" data-anchor-id="regressors-1">Regressors</h5>
<p><strong>In GUI</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_Outliers_Retrieve_Regressors.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Regressors in GUI</strong></figcaption>
</figure>
</div>
<p><strong>In R</strong></p>
<p>(to be added)</p>
</section>
<section id="regression-details" class="level5">
<h5 class="anchored" data-anchor-id="regression-details">Regression details</h5>
<p><strong>In GUI</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_Outliers_Retrieve_Regression_Results.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Regression details in GUI</strong></figcaption>
</figure>
</div>
<p><strong>In R</strong></p>
<p>(to be added)</p>
</section>
</section>
</section>
<section id="user-defined-regressors-1" class="level3">
<h3 class="anchored" data-anchor-id="user-defined-regressors-1">User-defined regressors</h3>
<p>(to be added)</p>
<ul>
<li><p>rationale</p></li>
<li><p>parameters: assign to a component</p></li>
</ul>
<p>Pre-treatment regression with additional outliers</p>
<p><span class="math display">\[
Y_t = \sum \hat{\alpha}_i O_{it} + \sum\hat\beta_j C_{jt} + \sum\hat\gamma_k Reg_{kt} + y_{lin_t}
\]</span></p>
<section id="allocation-to-components" class="level5">
<h5 class="anchored" data-anchor-id="allocation-to-components">Allocation to components</h5>
<p><span class="math inline">\(reg= reg_{i}+reg_{t}+reg_{s}+...\)</span> The user-defined regression variable associated to a specific component should not contain effects that have to be associated with another component. Therefore, the following rules should be observed: * The variable assigned to the trend or to the seasonally adjusted series should not contain a seasonal pattern; * The variable assigned to the seasonal should not contain a trend (or level); * The variable assigned to the irregular should contain neither a seasonal pattern nor a trend (or level). - no external regressors can be assigned to calendar component. It has to be be done via user defined calendar regressors specific part (link)</p>
<p>Ramps and intervention variables are Specific cases of external regressors</p>
</section>
<section id="setting-in-gui-1" class="level4">
<h4 class="anchored" data-anchor-id="setting-in-gui-1">Setting in GUI</h4>
<p>User-defined variables</p>
<p>Step 1: import data set containing the regressors, general procedure explained here</p>
<p>Step 2: Link the regressors to the workspace, procedure detailed here</p>
<p>Step 3: Modify specifications via window</p>
<p>Modifications are done the same way in a global specification (whole SAP) or series by series.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_User_def_Regressors_1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Creation of user-defined variables in GUI</strong></figcaption>
</figure>
</div>
</section>
<section id="setting-in-r-1" class="level4">
<h4 class="anchored" data-anchor-id="setting-in-r-1">Setting in R</h4>
<p>(to be added)</p>
</section>
<section id="special-case-1-ramp-effects" class="level4">
<h4 class="anchored" data-anchor-id="special-case-1-ramp-effects">Special case 1: Ramp effects</h4>
<p>A ramp effect means a linear increase or decrease in the level of the series over a specified time interval <span class="math inline">\(t_{0}\)</span> to <span class="math inline">\(\ t_{1}\)</span>. All dates of the ramps must occur within the time series span. (tested: not true). Ramps can overlap other ramps, additive outliers and level shifts.</p>
<section id="creation-in-gui" class="level6">
<h6 class="anchored" data-anchor-id="creation-in-gui">Creation in GUI</h6>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_user_def_regs_ramps_definition.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Creation of ramp variable in GUI</strong></figcaption>
</figure>
</div>
</section>
<section id="allocation-to-components-1" class="level6">
<h6 class="anchored" data-anchor-id="allocation-to-components-1">Allocation to components</h6>
<p>allocation when intervention or ramps ? in test allocated to trend ? (reg)</p>
<p>impossible (?) to create several intervention variables</p>
</section>
</section>
<section id="special-case-2-intervention-variables" class="level4">
<h4 class="anchored" data-anchor-id="special-case-2-intervention-variables">Special case 2: Intervention variables</h4>
<p>Intervention variables are modeled as any possible sequence of ones and zeros, on which some operators may be applied. They are built as combinations of the following basic structures:</p>
<ul>
<li>Dummy variables [^17];</li>
<li>Any possible sequence of ones and zeros;</li>
<li><span class="math inline">\(\frac{1}{(1 - \delta B)}\)</span>,</li>
<li><span class="math inline">\((0 &lt; \delta \leq 1)\)</span></li>
<li><span class="math inline">\(\frac{1}{(1 - \delta_{s}B^{s })}\)</span>,</li>
<li><span class="math inline">\((0 &lt; \delta_{s} \leq 1)\)</span>;</li>
<li><span class="math inline">\(\frac{1}{(1 - B)(1 - B^{s})}\)</span>;</li>
</ul>
<p>where <span class="math inline">\(B\)</span> is backshift operator (i.e.&nbsp;<span class="math inline">\(B^{k}X_{t} = X_{t - k}\)</span>) and <span class="math inline">\(s\)</span> is frequency of the time series (<span class="math inline">\(s = 12\)</span> for a monthly time series, <span class="math inline">\(s = 4\)</span> for a quarterly time series).</p>
<p>These basic structures enable the generation of not only AO, LS, TC, SO and RP outliers but also sophisticated intervention variables that are well-adjusted to the particular case.</p>
<section id="creation-in-gui-1" class="level6">
<h6 class="anchored" data-anchor-id="creation-in-gui-1">Creation in GUI</h6>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_calendar_user_def_inter_var_1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Step 1</strong></figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_calendar_user_def_inter_var_2.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Step 2</strong></figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_calendar_user_def_inter_var_3.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Step 3</strong></figcaption>
</figure>
</div>
</section>
<section id="creation-in-r" class="level6">
<h6 class="anchored" data-anchor-id="creation-in-r">Creation in R</h6>
<p>(to be added)</p>
</section>
<section id="allocation-to-components-2" class="level6">
<h6 class="anchored" data-anchor-id="allocation-to-components-2">Allocation to components</h6>
<p>allocation (to be added)</p>
<p>fixed coefficient options</p>
<ul>
<li><p><strong>Fixed regression coefficients</strong><br>
<em>regression variables; –</em></p>
<p>For the pre-specified regression variables this option specifies the parameter estimates that will be held fixed at the values provided by the user. To fix a coefficient the user should undertake the following actions:</p>
<ul>
<li>Choose the transformation (log or none).</li>
<li>Define some regression variables in the <em>Regressors</em> specification.</li>
<li>Push on the fixed regression coefficients editor button in the <strong>User-defined variables</strong> row.</li>
<li>Select the regression variable from the list for which the coefficient will be fixed.</li>
<li>Save the new setting with the <strong>Done</strong> button.</li>
</ul></li>
</ul>
<!-- Overview: differences GUI set up vs R set up -->
</section>
</section>
<section id="retrieving-results-2" class="level4">
<h4 class="anchored" data-anchor-id="retrieving-results-2">Retrieving Results</h4>
<p>For all types of external regressors: user-defined, ramps or intervention variables.</p>
<section id="regressors-2" class="level5">
<h5 class="anchored" data-anchor-id="regressors-2">Regressors</h5>
<p><strong>In GUI</strong></p>
<p>To retrieve regressors that were actually used, expand pre-processing NODE and click on Regressors pane.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_user_vars_retrieving_regressors.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Regressors in GUI</strong></figcaption>
</figure>
</div>
<p><strong>In R</strong></p>
<p>(to be added )</p>
</section>
<section id="regression-details-1" class="level5">
<h5 class="anchored" data-anchor-id="regression-details-1">Regression details</h5>
<p><strong>In GUI</strong></p>
<p>Regression details are in the pre-processing pane.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_user_vars_regression_details.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Regression details</strong></figcaption>
</figure>
</div>
<p><strong>IN R</strong></p>
</section>
</section>
</section>
<section id="arima-model" class="level3">
<h3 class="anchored" data-anchor-id="arima-model">Arima Model</h3>
<p>Key specifications on Arima modelling are embedded in default specifications: airline (default model) or full automatic research.(links)</p>
<p>Two kinds of interventions are available to the user</p>
<ul>
<li><p>modify automatic detection parameters</p></li>
<li><p>set a user defined Arima model</p></li>
</ul>
<p>In both cases forecast horizon can also be set (link)</p>
<section id="options-for-modifying-automatic-detection" class="level4">
<h4 class="anchored" data-anchor-id="options-for-modifying-automatic-detection">Options for modifying automatic detection</h4>
<p><em>automdl.enabled</em> If TRUE, the automatic modelling of the ARIMA model is enabled. (If FALSE, the parameters of the ARIMA model can be specified, see below)</p>
<p>Control variables for the automatic modelling of the ARIMA model (when automdl.enabled is set to TRUE):</p>
<p><em>automdl.acceptdefault</em> a logical. If TRUE, the default model (ARIMA(0,1,1)(0,1,1)) may be chosen in the first step of the automatic model identification. If the Ljung-Box Q statistics for the residuals is acceptable, the default model is accepted and no further attempt will be made to identify another model.</p>
<p><em>automdl.cancel</em> the cancellation limit (numeric). If the difference in moduli of an AR and an MA roots (when estimating ARIMA(1,0,1)(1,0,1) models in the second step of the automatic identification of the differencing orders) is smaller than the cancellation limit, the two roots are assumed equal and cancel out.</p>
<p><em>automdl.ub1</em> the first unit root limit (numeric). It is the threshold value for the initial unit root test in the automatic differencing procedure. When one of the roots in the estimation of the ARIMA(2,0,0)(1,0,0) plus mean model, performed in the first step of the automatic model identification procedure, is larger than the first unit root limit in modulus, it is set equal to unity.</p>
<p><em>automdl.ub2</em> the second unit root limit (numeric). When one of the roots in the estimation of the ARIMA(1,0,1)(1,0,1) plus mean model, which is performed in the second step of the automatic model identification procedure, is larger than second unit root limit in modulus, it is checked if there is a common factor in the corresponding AR and MA polynomials of the ARMA model that can be cancelled (see automdl.cancel). If there is no cancellation, the AR root is set equal to unity (i.e.&nbsp;the differencing order changes).</p>
<p><em>automdl.mixed</em> a logical. This variable controls whether ARIMA models with non-seasonal AR and MA terms or seasonal AR and MA terms will be considered in the automatic model identification procedure. If FALSE, a model with AR and MA terms in both the seasonal and non-seasonal parts of the model can be acceptable, provided there are no AR or MA terms in either the seasonal or non-seasonal terms.</p>
<p><em>automdl.balanced</em> a logical. If TRUE, the automatic model identification procedure will have a preference for balanced models (i.e.&nbsp;models for which the order of the combined AR and differencing operator is equal to the order of the combined MA operator).</p>
<p><em>automdl.armalimit</em> the ARMA limit (numeric). It is the threshold value for t-statistics of ARMA coefficients and constant term used for the final test of model parsimony. If the highest order ARMA coefficient has a t-value smaller than this value in magnitude, the order of the model is reduced. If the constant term t-value is smaller than the ARMA limit in magnitude, it is removed from the set of regressors.</p>
<p><em>automdl.reducecv</em> numeric, ReduceCV. The percentage by which the outlier’s critical value will be reduced when an identified model is found to have a Ljung-Box statistic with an unacceptable confidence coefficient. The parameter should be between 0 and 1, and will only be active when automatic outlier identification is enabled. The reduced critical value will be set to (1-ReduceCV)*CV, where CV is the original critical value.</p>
<p><em>automdl.ljungboxlimit</em> the Ljung Box limit (numeric). Acceptance criterion for the confidence intervals of the Ljung-Box Q statistic. If the LjungBox Q statistics for the residuals of a final model is greater than the Ljung Box limit, then the model is rejected, the outlier critical value is reduced and model and outlier identification (if specified) is redone with a reduced value.</p>
<p><em>automdl.ubfinal</em> numeric, final unit root limit. The threshold value for the final unit root test. If the magnitude of an AR root for the final model is smaller than the final unit root limit, then a unit root is assumed, the order of the AR polynomial is reduced by one and the appropriate order of the differencing (non-seasonal, seasonal) is increased. The parameter value should be greater than one.</p>
<p>(for both options) <em>fcst.horizon</em> the forecasting horizon (numeric). The forecast length generated by the Reg-Arima model in periods (positive values) or years (negative values). By default, the program generates a two-year forecast (fcst.horizon set to -2). Defaults different in GUI and R.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset content-visible" data-when-format="html">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">v2</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">v3</a></li></ul>
<div class="tab-content content-visible" data-when-format="html">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_arima_auto_params_v2.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Setting in GUI in v2</strong></figcaption>
</figure>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_arima_auto_params_v3.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Setting in GUI in v3</strong></figcaption>
</figure>
</div>
</div>
</div>
</div>
<p>Forecast horizon when using TRAMO-SEATS Is set in the decomposition part of the specification in GUI.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_arima_forecast_horizon_tramo.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Forecast horizon when using TRAMO-SEATS</strong></figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_arima_forecast_horizon_X11.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Forecast horizon when using X13-ARIMA</strong></figcaption>
</figure>
</div>
<p><strong>Setting in R</strong> (first template, then worked example) X13-ARIMA template in version 2</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>spec_2 <span class="ot">&lt;-</span> <span class="fu">x13_spec</span>(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">spec =</span> spec_1,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">automdl.enabled =</span> <span class="cn">NA</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">automdl.acceptdefault =</span> <span class="cn">NA</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">automdl.cancel =</span> <span class="cn">NA_integer_</span>,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">automdl.ub1 =</span> <span class="cn">NA_integer_</span>,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">automdl.ub2 =</span> <span class="cn">NA_integer_</span>,</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">automdl.mixed =</span> <span class="cn">NA</span>,</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">automdl.balanced =</span> <span class="cn">NA</span>,</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">automdl.armalimit =</span> <span class="cn">NA_integer_</span>,</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">automdl.reducecv =</span> <span class="cn">NA_integer_</span>,</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">automdl.ljungboxlimit =</span> <span class="cn">NA_integer_</span>,</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">automdl.ubfinal =</span> <span class="cn">NA_integer_</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>add worked example in version 2</p>
<p>in version 3</p>
<p>add worked example in version 3</p>
</section>
<section id="options-for-setting-a-user-defined-arima-model" class="level4">
<h4 class="anchored" data-anchor-id="options-for-setting-a-user-defined-arima-model">Options for setting a user-defined Arima model</h4>
<p>Control variables for the non-automatic modelling of the ARIMA model (when <em>automdl.enabled</em> is set to FALSE):</p>
<p><em>arima.mu</em> logical. If TRUE, the mean is considered as part of the ARIMA model.</p>
<p><em>arima.p</em> numeric. The order of the non-seasonal autoregressive (AR) polynomial.</p>
<p><em>arima.d</em> numeric. The regular differencing order.</p>
<p><em>arima.q</em> numeric. The order of the non-seasonal moving average (MA) polynomial.</p>
<p><em>arima.bp</em> numeric. The order of the seasonal autoregressive (AR) polynomial.</p>
<p><em>arima.bd</em> numeric. The seasonal differencing order.</p>
<p><em>arima.bq</em> numeric. The order of the seasonal moving average (MA) polynomial.</p>
<p>Control variables for the user-defined ARMA coefficients. Coefficients can be defined for the regular and seasonal autoregressive (AR) polynomials and moving average (MA) polynomials. The model considers the coefficients only if the procedure for their estimation (arima.coefType) is provided, and the number of provided coefficients matches the sum of (regular and seasonal) AR and MA orders (p,q,bp,bq).</p>
<p><em>arima.coefEnabled</em> logical. If TRUE, the program uses the user-defined ARMA coefficients.</p>
<p><em>arima.coef</em> a vector providing the coefficients for the regular and seasonal AR and MA polynomials. The vector length must be equal to the sum of the regular and seasonal AR and MA orders. The coefficients shall be provided in the following order: regular AR (Phi; p elements), regular MA (Theta; q elements), seasonal AR (BPhi; bp elements) and seasonal MA (BTheta; bq elements). E.g.: arima.coef=c(0.6,0.7) with arima.p=1, arima.q=0,arima.bp=1 and arima.bq=0.</p>
<p><em>arima.coefType</em> a vector defining the ARMA coefficients estimation procedure. Possible procedures are: “Undefined” = no use of any user-defined input (i.e.&nbsp;coefficients are estimated), “Fixed” = the coefficients are fixed at the value provided by the user, “Initial” = the value defined by the user is used as the initial condition. For orders for which the coefficients shall not be defined, the arima.coef can be set to NA or 0, or the arima.coefType can be set to “Undefined”. E.g.: arima.coef = c(-0.8,-0.6,NA), arima.coefType = c(“Fixed”,“Fixed”,“Undefined”).</p>
<p><strong>Setting in GUI</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_Arima_user_params_1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Manual ARIMA modelling</strong></figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_Arima_user_params_2.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Fixing coefficients</strong></figcaption>
</figure>
</div>
<p><strong>Setting in R</strong></p>
<p>X13-ARIMA template in version 2</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>spec_2 <span class="ot">&lt;-</span> <span class="fu">x13_spec</span>(</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">spec =</span> spec_1,</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">automdl.enabled =</span> <span class="cn">FALSE</span>,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">arima.mu =</span> <span class="cn">NA</span>,</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">arima.p =</span> <span class="cn">NA_integer_</span>,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">arima.d =</span> <span class="cn">NA_integer_</span>,</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">arima.q =</span> <span class="cn">NA_integer_</span>,</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">arima.bp =</span> <span class="cn">NA_integer_</span>,</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">arima.bd =</span> <span class="cn">NA_integer_</span>,</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">arima.bq =</span> <span class="cn">NA_integer_</span>,</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">arima.coefEnabled =</span> <span class="cn">NA</span>,</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">arima.coef =</span> <span class="cn">NA</span>,</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">arima.coefType =</span> <span class="cn">NA</span>,</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">fcst.horizon =</span> <span class="cn">NA_integer_</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>in version 3</p>
</section>
</section>
<section id="reg-arima-model-results-and-diagnostics" class="level3">
<h3 class="anchored" data-anchor-id="reg-arima-model-results-and-diagnostics">Reg-Arima model Results and Diagnostics</h3>
<p>Type of results (including Tramo addenda)</p>
<ul>
<li><p>all regressors used (shown above)</p></li>
<li><p>regression details: explanatory variables (above)</p></li>
<li><p>Arima model specific results</p></li>
<li><p>additional diagnostics on residuals</p></li>
<li><p>likelihood</p></li>
<li><p>seasonality tests on residuals</p></li>
</ul>
<section id="display-in-gui" class="level4">
<h4 class="anchored" data-anchor-id="display-in-gui">Display in GUI</h4>
<p>Reg-Arima model detail with other regression results in pre-processing pane. with number of observations.. parameters</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_Arima_model_results_1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Final model</strong></figcaption>
</figure>
</div>
<p>More details in Pre-processing/Arima Node</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_Arima_model_results_2.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Arima details</strong></figcaption>
</figure>
</div>
<p>In residual Node</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_Arima_Model_Residuals_Node.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Residuals</strong></figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_Arima_Model_Residuals_Node_7.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Distribution</strong></figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_Arima_Model_Likelihood_Node.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Likelihood</strong></figcaption>
</figure>
</div>
<p><img src="All_images/SA_REGA_Arima_Model_Likelihood_Node.png" class="img-fluid"></p>
<p>Seasonality tests on residuals in the <strong>Diagnostics NODE</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="All_images/SA_REGA_Arima_Model_residuals_seaso_tests.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Residuals</strong></figcaption>
</figure>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./A-sa-overview.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Seasonal Adjustment (SA) Overview</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./A-sa-X11-decomposition.html" class="pagination-link">
        <span class="nav-page-text">SA: X11 Decomposition</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">This book was built with <a href="https://quarto.org/">Quarto</a>.</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right"></div>
  </div>
</footer>



</body></html>